local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local enabled = true
local labels = {}

local function getSpeed(plr)
    local char = plr.Character
    if not char then return 0 end
    local hrp = char:FindFirstChild("HumanoidRootPart")
    if not hrp then return 0 end
    local v = hrp.Velocity
    return math.floor(Vector3.new(v.X, 0, v.Z).Magnitude)
end

local function createLabel(plr)
    local char = plr.Character
    if not char then return end
    local head = char:FindFirstChild("Head")
    if not head then return end

    if labels[plr] then labels[plr]:Destroy() end

    local bb = Instance.new("BillboardGui")
    bb.Size = UDim2.new(0, 200, 0, 60)
    bb.StudsOffset = Vector3.new(0, 2.5, 0)
    bb.AlwaysOnTop = true
    bb.Parent = head -- ðŸ”´ AQUI ESTAVA O ERRO
    labels[plr] = bb

    local nick = Instance.new("TextLabel")
    nick.Size = UDim2.new(1, 0, 0.5, 0)
    nick.BackgroundTransparency = 1
    nick.TextScaled = true
    nick.Font = Enum.Font.SourceSansBold
    nick.TextStrokeTransparency = 0
    nick.TextColor3 = Color3.new(1,1,1)
    nick.Text = plr.Name
    nick.Parent = bb

    local vel = Instance.new("TextLabel")
    vel.Name = "Vel"
    vel.Position = UDim2.new(0, 0, 0.5, 0)
    vel.Size = UDim2.new(1, 0, 0.5, 0)
    vel.BackgroundTransparency = 1
    vel.TextScaled = true
    vel.Font = Enum.Font.SourceSansBold
    vel.TextStrokeTransparency = 0
    vel.Parent = bb
end

Players.PlayerAdded:Connect(function(plr)
    plr.CharacterAdded:Connect(function()
        task.wait(1)
        createLabel(plr)
    end)
end)

for _, plr in ipairs(Players:GetPlayers()) do
    if plr.Character then
        createLabel(plr)
    end
end

RunService.RenderStepped:Connect(function()
    if not enabled then return end

    for plr, bb in pairs(labels) do
        local velLabel = bb:FindFirstChild("Vel")
        if velLabel then
            local speed = getSpeed(plr)
            local warn = speed >= 101 and " âš ï¸" or ""
            velLabel.Text = "Vel: " .. speed .. warn
            velLabel.TextColor3 = speed >= 101
                and Color3.fromRGB(255,0,0)
                or Color3.fromRGB(0,255,0)
        end
    end
end)
